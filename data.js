// 条件付き変換
const conditionalReplacements = {
  "弁": [
    {
      condition: (prev, next) => ["雄", "詭", "答", "熱", "代", "多", "能"].includes(prev) || ["護", "論", "解", "説", "明"].includes(next),
      replacement: "辯"
    },
    {
      condition: (prev, next) => ["勘", "駅"].includes(prev) || ["証", "別", "済", "慶", "当", "天", "償", "理"].includes(next),
      replacement: "辨"
    },
    {
      condition: (prev, next) => ["安全", "調整", "制御", "花", "気", "自動", "可動"].includes(prev) || ["膜"].includes(next),
      replacement: "瓣"
    },
    {
      condition: (prev, next) => ["合"].includes(prev),
      replacement: "辦"
    },
    {
      condition: (prev, next) => ["髪"].includes(next),
      replacement: "辮"
    },
    {
      condition: (prev, next) => ["武"].includes(prev) || ["韓"].includes(next),
      replacement: "弁"
    }
  ],
  "編": [
    {
      condition: (prev, next) => ["詩", "短", "長", "一", "二", "三", "四", "五", "六", "七", "八", "九", "十", "百", "千"].includes(prev),
      replacement: "篇"
    },
  ],
  "乱": [
    {
      condition: (prev, next) => ["腐"].includes(prev) || ["獲", "造", "伐", "発", "費", "用", "立"].includes(next),
      replacement: "濫"
    },
  ],
  "壊": [
    {
      condition: (prev, next) => ["決", "倒", "崩"].includes(prev) || ["滅", "乱"].includes(next),
      replacement: "潰"
    },
  ],
  "決": [
    {
      condition: (prev, next) => ["永", "秘", "要"].includes(prev) || ["辞", "別"].includes(next),
      replacement: "訣"
    }
  ],
  "欠": [
    {
      condition: (prev, next) => !(["伸"].includes(next)),
      replacement: "缺"
    },
  ]
};

// 通常の新字体と旧字体変換
const replacements = {
  "亜": "亞",
  "残": "殘",
  "点": "點",
  "悪": "惡",
  "糸": "絲",
  "転": "轉",
  "圧": "壓",
  "祉": "祉",
  "顛": "顚",
  "囲": "圍",
  "視": "視",
  "伝": "傳",
  "医": "醫",
  "歯": "齒",
  "都": "都",
  "為": "爲",
  "児": "兒",
  "灯": "燈",
  "壱": "壹",
  "辞": "辭",
  "当": "當",
  "逸": "逸",
  "湿": "濕",
  "党": "黨",
  "飲": "飮",
  "実": "實",
  "盗": "盜",
  "隠": "隱",
  "写": "寫",
  "稲": "稻",
  "栄": "榮",
  "社": "社",
  "闘": "鬪",
  "営": "營",
  "舎": "舍",
  "徳": "德",
  "衛": "衞",
  "者": "者",
  "独": "獨",
  "駅": "驛",
  "煮": "煮",
  "読": "讀",
  "謁": "謁",
  "釈": "釋",
  "突": "突",
  "円": "圓",
  "寿": "壽",
  "届": "屆",
  "塩": "鹽",
  "収": "收",
  "縄": "繩",
  "縁": "緣",
  "臭": "臭",
  "難": "難",
  "艶": "艷",
  "従": "從",
  "弐": "貳",
  "焔": "焰",
  "渋": "澁",
  "悩": "惱",
  "欧": "歐",
  "獣": "獸",
  "脳": "腦",
  "殴": "毆",
  "縦": "縱",
  "覇": "霸",
  "桜": "櫻",
  "祝": "祝",
  "拝": "拜",
  "応": "應",
  "粛": "肅",
  "廃": "廢",
  "奥": "奧",
  "処": "處",
  "売": "賣",
  "横": "橫",
  "暑": "暑",
  "梅": "梅",
  "鴎": "鷗",
  "署": "署",
  "麦": "麥",
  "温": "溫",
  "緒": "緖",
  "発": "發",
  "穏": "穩",
  "諸": "諸",
  "髪": "髮",
  "仮": "假",
  "叙": "敍",
  "抜": "拔",
  "価": "價",
  "将": "將",
  "繁": "繁",
  "禍": "禍",
  "渉": "涉",
  "晩": "晚",
  "画": "畫",
  "焼": "燒",
  "蛮": "蠻",
  "会": "會",
  "祥": "祥",
  "卑": "卑",
  "壊": "壞",
  "称": "稱",
  "秘": "祕",
  "悔": "悔",
  "証": "證",
  "碑": "碑",
  "海": "海",
  "奨": "奬",
  "浜": "濱",
  "絵": "繪",
  "条": "條",
  "賓": "賓",
  "懐": "懷",
  "状": "狀",
  "頻": "頻",
  "慨": "慨",
  "乗": "乘",
  "敏": "敏",
  "概": "槪",
  "浄": "淨",
  "瓶": "甁",
  "拡": "擴",
  "剰": "剩",
  "侮": "侮",
  "殻": "殼",
  "畳": "疊",
  "福": "福",
  "覚": "覺",
  "壌": "壤",
  "払": "拂",
  "学": "學",
  "嬢": "孃",
  "仏": "佛",
  "岳": "嶽",
  "譲": "讓",
  "併": "倂",
  "楽": "樂",
  "醸": "釀",
  "並": "竝",
  "喝": "喝",
  "触": "觸",
  "塀": "塀",
  "渇": "渴",
  "嘱": "囑",
  "辺": "邊",
  "褐": "褐",
  "神": "神",
  "変": "變",
  "缶": "罐",
  "真": "眞",
  "弁": "辯", // デフォルトでは方言の意の弁と解釈
  "勧": "勸",
  "寝": "寢",
  "槙": "槇",
  "歩": "步",
  "漢": "漢",
  "尽": "盡",
  "舗": "舖",
  "関": "關",
  "図": "圖",
  "穂": "穗",
  "歓": "歡",
  "粋": "粹",
  "宝": "寶",
  "観": "觀",
  "酔": "醉",
  "豊": "豐",
  "顔": "顏",
  "随": "隨",
  "褒": "襃",
  "気": "氣",
  "髄": "髓",
  "墨": "墨",
  "汽": "滊",
  "枢": "樞",
  "没": "沒",
  "祈": "祈",
  "数": "數",
  "翻": "飜",
  "既": "既",
  "瀬": "瀨",
  "毎": "毎",
  "帰": "歸",
  "声": "聲",
  "万": "萬",
  "器": "器",
  "斉": "齊",
  "満": "滿",
  "亀": "龜",
  "静": "靜",
  "免": "免",
  "偽": "僞",
  "窃": "竊",
  "麺": "麵",
  "戯": "戲",
  "摂": "攝",
  "黙": "默",
  "犠": "犧",
  "節": "節",
  "餅": "餠",
  "旧": "舊",
  "専": "專",
  "弥": "彌",
  "拠": "據",
  "浅": "淺",
  "薬": "藥",
  "挙": "擧",
  "戦": "戰",
  "訳": "譯",
  "虚": "虛",
  "践": "踐",
  "祐": "祐",
  "峡": "峽",
  "銭": "錢",
  "与": "與",
  "挟": "挾",
  "潜": "潛",
  "予": "豫",
  "狭": "狹",
  "繊": "纖",
  "余": "餘",
  "郷": "鄕",
  "僣": "僭",
  "誉": "譽",
  "響": "響",
  "禅": "禪",
  "揺": "搖",
  "暁": "曉",
  "祖": "祖",
  "様": "樣",
  "勤": "勤",
  "双": "雙",
  "謡": "謠",
  "謹": "謹",
  "壮": "壯",
  "来": "來",
  "区": "區",
  "争": "爭",
  "頼": "賴",
  "駆": "驅",
  "荘": "莊",
  "乱": "亂",
  "勲": "勳",
  "捜": "搜",
  "覧": "覧",
  "薫": "薰",
  "挿": "插",
  "欄": "欄",
  "径": "徑",
  "巣": "巢",
  "竜": "龍",
  "茎": "莖",
  "装": "裝",
  "隆": "隆",
  "恵": "惠",
  "僧": "僧",
  "虜": "虜",
  "掲": "揭",
  "層": "層",
  "両": "兩",
  "渓": "溪",
  "聡": "聰",
  "猟": "獵",
  "経": "經",
  "騒": "騷",
  "緑": "綠",
  "蛍": "螢",
  "総": "總",
  "涙": "淚",
  "軽": "輕",
  "増": "増",
  "塁": "壘",
  "継": "繼",
  "憎": "憎",
  "類": "類",
  "鶏": "鷄",
  "蔵": "藏",
  "礼": "禮",
  "芸": "藝",
  "贈": "贈",
  "戻": "戾",
  "撃": "擊",
  "臓": "臟",
  "励": "勵",
  "即": "卽",
  "霊": "靈",
  "研": "硏",
  "属": "屬",
  "隷": "隸",
  "県": "縣",
  "続": "續",
  "齢": "齡",
  "倹": "儉",
  "堕": "墮",
  "暦": "曆",
  "剣": "劍",
  "対": "對",
  "歴": "歷",
  "険": "險",
  "体": "體",
  "恋": "戀",
  "圏": "圈",
  "帯": "帶",
  "練": "練",
  "検": "檢",
  "滞": "滯",
  "錬": "鍊",
  "献": "獻",
  "台": "臺",
  "炉": "爐",
  "権": "權",
  "滝": "瀧",
  "労": "勞",
  "顕": "顯",
  "択": "擇",
  "郎": "郞",
  "験": "驗",
  "厳": "嚴",
  "単": "單",
  "廊": "廊",
  "広": "廣",
  "担": "擔",
  "楼": "樓",
  "効": "效",
  "胆": "膽",
  "録": "錄",
  "恒": "恆",
  "嘆": "嘆",
  "湾": "灣",
  "朗": "朗",
  "黄": "黃",
  "団": "團",
  "遥": "遙",
  "鉱": "鑛",
  "断": "斷",
  "巌": "巖",
  "号": "號",
  "弾": "彈",
  "麹": "麴",
  "国": "國",
  "遅": "遲",
  "尭": "堯",
  "穀": "穀",
  "痴": "癡",
  "黒": "黑",
  "虫": "蟲",
  "亘": "亙",
  "済": "濟",
  "昼": "晝",
  "噛": "嚙",
  "砕": "碎",
  "鋳": "鑄",
  "餐": "飧",
  "斎": "齋",
  "著": "著",
  "茲": "玆",
  "剤": "劑",
  "連": "聯",
  "庁": "廳",
  "渚": "渚",
  "冊": "册",
  "徴": "徵",
  "穣": "穰",
  "殺": "殺",
  "聴": "聽",
  "琢": "琢",
  "雑": "雜",
  "懲": "懲",
  "猪": "猪",
  "参": "參",
  "勅": "勅",
  "禎": "禎",
  "桟": "棧",
  "鎮": "鎭",
  "瑶": "瑤",
  "蚕": "蠶",
  "塚": "塚",
  "屡": "屡",
  "惨": "慘",
  "逓": "遞",
  "禄": "祿",
  "賛": "贊",
  "鉄": "鐵"
};

// 熟語の変換
const idiomReplacements = {
  // 【あ】
  "愛欲": "愛慾",
  "安逸": "安佚",
  "暗影": "暗翳",
  "暗唱": "暗誦",
  "案分": "按分",
  "暗夜": "闇夜",
  // 【い】
  "意向": "意嚮",
  "慰謝料": "慰藉料",
  "衣装": "衣裳",
  "遺跡": "遺蹟",
  "一丁": "一挺",
  "陰影": "陰翳",
  // 【え】
  "英知": "叡智",
  "英才": "頴才",
  "援護": "掩護",
  "園地": "苑地",
  // 【お】
  "憶説": "臆説",
  "憶測": "臆測",
  "恩義": "恩誼",
  // 【か】
  "外郭": "外廓",
  "快活": "快濶",
  "皆既食": "皆既蝕",
  "戒告": "誡告",
  "開削": "開鑿",
  "回送": "廻送",
  "回虫": "蛔虫",
  "回転": "廻転",
  "回復": "恢復",
  "壊滅": "潰滅",
  "壊乱": "潰乱",
  "画然": "劃然",
  "郭大": "廓大",
  "格闘": "挌闘",
  "画期的": "劃期的",
  "活発": "活潑",
  "干害": "旱害",
  "間欠": "間歇",
  "管弦楽": "管絃楽",
  "肝心": "肝腎",
  "干天": "旱天",
  "乾留": "乾溜",
  // 【き】
  "気炎": "気焔",
  "飢餓": "饑餓",
  "企画": "企劃",
  "奇形": "畸形",
  "希元素": "稀元素",
  "希釈": "稀釈",
  "希少": "稀少",
  "記章": "徽章",
  "奇跡": "奇蹟",
  "希代": "稀代",
  "奇談": "綺談",
  "機知": "機智",
  "喫水": "吃水",
  "希薄": "稀薄",
  "糾弾": "糺弾",
  "旧跡": "旧蹟",
  "凶悪": "兇悪",
  "供応": "饗応",
  "教戒": "教誨",
  "凶漢": "兇漢",
  "強固": "鞏固",
  "凶行": "兇行",
  "凶刃": "兇刃",
  "凶変": "兇変",
  "凶暴": "兇暴",
  "御者": "馭者",
  "漁労": "漁撈",
  "希硫酸": "稀硫酸",
  "技量": "技倆",
  "吟唱": "吟誦",
  // 【く】
  "区画": "区劃",
  "掘削": "掘鑿",
  "訓戒": "訓誡",
  "薫製": "燻製",
  // 【け】
  "係船": "繋船",
  "係争": "繋争",
  "係属": "繋属",
  "係留": "繋留",
  "下克上": "下剋上",
  "決壊": "決潰",
  "決起": "蹶起",
  "月食": "月蝕",
  "決別": "訣別",
  "弦歌": "絃歌",
  "元凶": "元兇",
  "厳然": "儼然", 
  // 【こ】
  "交歓": "交驩",
  "鉱業": "礦業",
  "硬骨": "鯁骨",
  "交差": "交叉",
  "控除": "扣除",
  "更生": "甦生",
  "鉱石": "礦石",
  "広壮": "宏壮",
  "広大": "宏大",
  "香典": "香奠",
  "高騰": "昂騰",
  "広範": "広汎",
  "興奮": "昂奮",
  "広報": "弘報",
  "広野": "曠野",
  "高揚": "昂揚",
  "強欲": "強慾",
  "講和": "媾和",
  "枯渇": "涸渇",
  "古希": "古稀",
  "古跡": "古蹟",
  "骨格": "骨骼",
  "雇用": "雇傭",
  "混交": "混淆",
  "根底": "根柢",
  "混迷": "昏迷",
  // 【さ】
  "酢酸": "醋酸",
  "座視": "坐視",
  "座礁": "坐礁",
  "座州": "坐洲",
  "雑踏": "雑沓",
  "三弦": "三絃",
  "賛仰": "讃仰",
  "賛辞": "讃辞",
  "散水": "撒水",
  "賛嘆": "讃嘆",
  "賛美": "讃美",
  "散布": "撒布",
  // 【し】
  "色欲": "色慾",
  "刺激": "刺戟",
  "史跡": "史蹟",
  "死体": "屍体",
  "七転八倒": "七顚八倒",
  "死没": "死歿",
  "射幸心": "射倖心",
  "車両": "車輌",
  "集荷": "蒐荷",
  "収集": "蒐集",
  "終息": "終熄",
  "集落": "聚落",
  "手跡": "手蹟",
  "俊才": "駿才",
  "消夏": "銷夏",
  "消却": "銷却",
  "障害": "障礙",
  "情義": "情誼",
  "称賛": "称讃",
  "賞賛": "賞讃",
  "昇叙": "陞叙",
  "焦燥": "焦躁",
  "消沈": "銷鎮",
  "障壁": "牆壁",
  "蒸留": "蒸溜",
  "書簡": "書翰",
  "食尽": "蝕甚",
  "食欲": "食慾",
  "叙情": "抒情",
  "試練": "試煉",
  "針術": "鍼術",
  "侵食": "侵蝕",
  "浸食": "浸蝕",
  "真跡": "真蹟",
  "伸長": "伸暢",
  "浸透": "滲透",
  "侵略": "侵掠",
  "尋問": "訊問",
  // 【す】
  "衰退": "衰頽",
  // 【せ】
  "制御": "制禦",
  "生息": "棲息",
  "性欲": "性慾",
  "絶賛": "絶讃",
  "先鋭": "尖鋭",
  "全壊": "全潰",
  "選考": "銓衡",
  "扇情": "煽情",
  "洗浄": "洗滌",
  "戦々恐々": "戦々兢々",
  "船倉": "船艙",
  "先端": "尖端",
  "専断": "擅断",
  "扇動": "煽動",
  "戦没": "戦歿",
  // 【そ】
  "象眼": "象嵌",
  "総合": "綜合",
  "相克": "相剋",
  "総菜": "惣菜",
  "装丁": "装釘",
  "族生": "簇生",
  "阻止": "沮止",
  "疎水": "疏水",
  "疎喪": "阻喪",
  "疎通": "疏通",
  "疎明": "疏明",
  // 【た】
  "退色": "褪色",
  "退勢": "頽勢",
  "退廃": "頽廃",
  "台風": "颱風",
  "大欲": "大慾",
  "奪略": "奪掠",
  "嘆願": "歎願",
  "炭鉱": "炭礦",
  "端座": "端坐",
  "暖房": "煖房",
  "暖炉": "煖炉",
  // 【ち】
  "知恵": "智慧",
  "知謀": "智謀",
  "注解": "註解",
  "注釈": "註釈",
  "注文": "註文",
  "長編": "長篇",
  "沈殿": "沈澱",
  // 【て】
  "低回": "彽徊",
  "抵触": "觝触",
  "丁重": "鄭重",
  "丁寧": "叮嚀",
  "停泊": "碇泊",
  "手帳": "手帖",
  "転倒": "顚倒",
  "転覆": "顚覆",
  // 【と】
  "倒壊": "倒潰",
  "踏襲": "蹈襲",
  "特集": "特輯",
  "途絶": "杜絶",
  // 【に】
  "日食": "日蝕",
  // 【ね】
  "年没": "年歿",
  // 【は】
  "背徳": "悖徳",
  "破棄": "破毀",
  "暴露": "曝露",
  "破砕": "破摧",
  "発酵": "醗酵",
  "薄幸": "薄倖",
  "抜粋": "抜萃",
  "反逆": "叛逆",
  "反旗": "叛旗",
  "反乱": "叛乱",
  "反逆": "叛逆",
  "繁殖": "蕃殖",
  "蛮族": "蕃族",
  "反発": "反撥",
  // 【ひ】
  "飛語": "蜚語",
  "筆跡": "筆蹟",
  "病没": "病歿",
  // 【ふ】
  "風刺": "諷刺",
  "腐食": "腐蝕",
  "符丁": "符牒",
  "物欲": "物慾",
  "腐乱": "腐爛",
  // 【へ】
  "編集": "編輯",
  "辺境": "辺疆",
  // 【ほ】
  "保育": "哺育",
  "崩壊": "崩潰",
  "妨害": "妨礙",
  "放棄": "抛棄",
  "防御": "防禦",
  "包帯": "繃帯",
  "膨大": "厖大",
  "包丁": "庖丁",
  "放物線": "抛物線",
  "補佐": "輔佐",
  "舗装": "鋪装",
  "補導": "鋪導",
  "保母": "保姆",
  // 【ま】
  "摩滅": "磨滅",
  // 【む】
  "無知": "無智",
  "謀反": "謀叛",
  "無欲": "無慾",
  // 【め】
  "名誉欲": "名誉慾",
  "綿花": "棉花",
  // 【も】
  "盲動": "妄動",
  "模索": "摸索",
  // 【や】
  "野卑": "野鄙",
  // 【よ】
  "溶接": "鎔接",
  "溶岩": "熔岩",
  "溶鉱炉": "鎔鉱炉",
  // 【ら】
  "落盤": "落磐",
  // 【り】
  "理屈": "理窟",
  "利口": "悧巧",
  "理知": "理智",
  "離反": "離叛",
  "略奪": "掠奪",
  "里謡": "俚謡",
  "輪郭": "輪廓",
  "了解": "諒解",
  "了承": "諒承",
  // 【れ】
  "連係": "連繋",
  "連合": "聯合",
  "連座": "連坐",
  "聯想": "連想",
  "連珠": "聯珠",
  "練炭": "煉炭",
  "連邦": "聯邦",
  "連盟": "聯盟",
  "連絡": "聯絡",
  "連立": "聯立",
  // 【わ】
  "湾入": "彎入",
  "湾曲": "彎曲"
};
